<%- include base/headerMobile-index.ejs %>
        <div class="personal-tab-container">
            <div class="personal-items">
                <div class="personal-item personal-logstate">
                    <div class="personal-personIcon personal-state">
                        <div class="personal-personIcon3"></div>
                        <div class="personal-personIcon1"></div>
                        <div class="personal-personIcon2"></div>
                    </div>
                    <span class="personal-logfont personal-state">未登录</span>
                    <div class="personal-next personal-state"> 
                        <div class="personal-next1"></div> 
                        <div class="personal-next2"></div> 
                    </div>
                </div>
                <div class="personal-item personal-details">
                    <div class="personal-detail persoanl-info">
                        <div class="personal-item-icon personal-information"></div>
                        <span class="personal-item-text personal-information">个人资料</span>
                        <div class="personal-next personal-information"> 
                            <div class="personal-next1"></div> 
                            <div class="personal-next2"></div> 
                        </div>
                    </div>
                    <div class="personal-detail personal-pwd">
                        <div class="personal-item-icon personal-changepwd"></div>
                        <span class="personal-item-text personal-changepwd">修改密码</span>
                        <div class="personal-next personal-changepwd"> 
                            <div class="personal-next1"></div> 
                            <div class="personal-next2"></div> 
                        </div>
                    </div>
                    <div class="personal-detail personal-collections">
                        <div class="personal-item-icon personal-collection"></div>
                        <span class="personal-item-text personal-collection">我的收藏</span>
                        <div class="personal-next personal-collection"> 
                            <div class="personal-next1"></div> 
                            <div class="personal-next2"></div> 
                        </div>
                    </div>
                    <div class="personal-detail personal-friend">
                        <div class="personal-item-icon personal-invitefriend"></div>
                        <span class="personal-item-text personal-invitefriend">邀请好友</span>
                        <div class="personal-next personal-invitefriend"> 
                            <div class="personal-next1"></div> 
                            <div class="personal-next2"></div> 
                        </div>
                    </div>
                </div>
                <div class="personal-item personal-signBtn">
                    <button id="exit">退出登录</button>
                </div>
            </div>
        </div>
<%- include base/baseJSMobile-index.ejs %>


<script>
    console.log(<%=user_id%>);
    (function() {
        var personal = {
            name:$('.personal-state.personal-logfont'),
            state : $('.personal-state'),
            info : $('.personal-information'),
            changepwd : $('.personal-changepwd'),
            collection : $('.personal-collection'),
            invite : $('.personal-invitefriend'),
            exit: $('.personal-item.personal-signBtn'),
            getServerData: function(param, cb) {
                
            },
            bindEvent: function() {
                var that = this;

                that.state.on('touchend',function(e){
                    //e.preventDefault();
                    window.location.href = '/loginNew';
                });

                that.info.on('touchend',function(e){
                    window.location.href = window.location.pathname + "/personalInfo";
                });
                that.changepwd.on('touchend',function(e){
                    window.location.href = window.location.pathname + "/changepassword";
                });
                that.collection.on('touchend',function(e){
                    window.location.href = window.location.pathname + "/myCollection";
                });
                that.invite.on('touchend',function(e){
                    window.location.href = window.location.pathname + "/invite";
                });

                that.exit.on('touchend',function(e){
                    //退出登录
                });
            },
            init: function() {
                var that = this;
                wuanTabfun.tabHighlight("tab-head-myself");
                wuanTabfun.title('我的');
                that.bindEvent();

                global.subData('/personal',{
                    userId : <%=user_id%>,
                },function(data){
                    if(data.ret === 200 && data.data){
                        var person = data.data.info;
                        if(person.user_id){
                            name.html(person.user_name);
                        }else{
                            exit.remove();
                        }
                        
                    }else{
                        alert('请求错误');
                    }
                });

            }
        }
        personal.init();
    })();
</script>
<%- include base/footerMobile.ejs %>