<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
		<meta content="yes" name="apple-mobile-web-app-capable">
		<meta content="yes" name="apple-touch-fullscreen">
		<meta content="telephone=no,email=no" name="format-detection">
		<script src="http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"></script>
		<link rel="stylesheet" type="text/css" href="css/sweetAlert.css">
		<link rel="stylesheet" type="text/css" href="css/globalMobile.css">
		<link rel="stylesheet" type="text/css" href="css/loading.css">
		<title>
			<%=title%> - 午安网 - 过你想过的生活</title>
	</head>

	<body>
		<div class="container all-wrapper">
			<div class="main-wrapper">
				<div class="navbar">
					<h1>午安网</h1>
					<button type="button" class="navbar-toggle"></button>
				</div>
				<div class="mainContainer">
					<div class="main">

					</div>
					<div class="loading" style='display: none;'>
						<div class='uil-default-css'>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(0deg) translate(0,-60px);transform:rotate(0deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(30deg) translate(0,-60px);transform:rotate(30deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(60deg) translate(0,-60px);transform:rotate(60deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(90deg) translate(0,-60px);transform:rotate(90deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(120deg) translate(0,-60px);transform:rotate(120deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(150deg) translate(0,-60px);transform:rotate(150deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(180deg) translate(0,-60px);transform:rotate(180deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(210deg) translate(0,-60px);transform:rotate(210deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(240deg) translate(0,-60px);transform:rotate(240deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(270deg) translate(0,-60px);transform:rotate(270deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(300deg) translate(0,-60px);transform:rotate(300deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
							<div style='top:80px;left:93px;width:14px;height:40px;background:#00b2ff;-webkit-transform:rotate(330deg) translate(0,-60px);transform:rotate(330deg) translate(0,-60px);border-radius:10px;position:absolute;'></div>
						</div>
					</div>
				</div>
				<div class="mask"></div>
			</div>
			<div class="sidebarContainer">
				<div class="sidebar">
					<h1>午安网</h1>
					<ul class="navbar-option">
						<li>
							<a href="/" class="navbar-icon navbar-option-item nav-h">首页</a>
						</li>
						<li>
							<a href="/allGroup" class="navbar-icon navbar-option-item nav-ag">全部星球</a>
						</li>
					</ul>
					<ul class="navbar-account">
						<li class="aNLog">
							<a href="/login" title="" class="navbar-icon navbar-account-item">登录</a>
						</li>
						<li class="aNLog">
							<a href="/register" title="" class="navbar-icon navbar-account-item">注册</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="js/zepto.min.js"></script>
		<script type="text/javascript" src="js/zepto.touch.js"></script>
		<script src="js/zepto.callbacks.js"></script>
		<script src="js/zepto.deferred.js"></script>
		<script src="js/sweetAlert.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/template.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="js/plupload/plupload.full.min.js"></script>
		<script type="text/javascript" src="js/plupload/i18n/zh_CN.js"></script>
		<script type="text/javascript" src="js/qiniu.js"></script>
		<script type="text/javascript">
			var global = (function() {
				//设置侧栏切换按钮
				$(".navbar-toggle").on("touchend", function() {
					var all = $(".all-wrapper");
					if(all.hasClass('open')) {
						all.removeClass('open').addClass('close');
					} else {
						all.removeClass('close').addClass('open');
					}
				});
				//主栏遮罩
				$(".mask").on("touchend", function(e) {
					//e.stopPropagation();
					$(".all-wrapper").removeClass('open').addClass('close');
					return false; //zepto return false 则会阻止事件冒泡以及默认操作
				});
				//ajax获取数据
				var getData = function(url, param, cb) {
					$.getJSON(url, param, function(data) {
						cb(data);
					});
				};
				//ajax提交数据
				var subData = function(url, data, success) {
					$.ajax({
						type: "post",
						url: url,
						data: data,
						success: function(d) {
							success(d);
						},
						error: function(x, h, r) {
							console && console.log(x, h, r);
						}
					});
				};
				//设置主栏主内容容器高度
				$(document).ready(function() {
					var windowHeight = $(window).height();
					$('.all-wrapper').css('height', windowHeight);
					$(window).resize(function(event) {
						/* Act on the event */
						var currentHeight = $(window).height();
						if(currentHeight >= windowHeight) {
							$('.all-wrapper').css('height', currentHeight);
						}
					});
				});
				//获取翻页页数
				var getPageNow = function() {
					var reg = /page=(\d+)/,
						regMatch = reg.exec(location.search),
						pageNow = regMatch === null ? 1 : regMatch[1];
					return pageNow;
				};
				//翻页事件处理
				var everPushed = false;
				var changeEverPushed = function() {
					everPushed = true;
				}
				var pageTurning = function(pre, next, pageCount, updata) {
					var self = this;
					var initialUrl = location.href;
					$(document).on('touchend', pre, function(event) {
						event.preventDefault();
						/* Act on the event */
						var pageNow = global.getPageNow();
						if(pageNow == 1) {
							return;
						} else {
							pageNow--;
							var newURL = location.pathname + '?page=' + pageNow;
							history.pushState(null, '', newURL);
							everPushed = true;
							updata.apply(self, []);
						}
					});
					$(document).on('touchend', next, function(event) {
						event.preventDefault();
						/* Act on the event */
						var pageNow = global.getPageNow();
						if(pageNow == pageCount) {
							return;
						} else {
							pageNow++;
							var newURL = location.pathname + '?page=' + pageNow;
							history.pushState(null, '', newURL);
							everPushed = true;
							updata.apply(self, []);
						}
					});
					//popstate
					$(window).on('popstate', function(event) {
						event.preventDefault();
						/* Act on the event */
						var onloadPop = !everPushed && location.href == initialUrl;
						everPushed = true;
						if(onloadPop) return;
						updata.apply(self, []);
					});
				};
				return {
					getData: getData,
					subData: subData,
					getPageNow: getPageNow,
					pageTurning: pageTurning,
					changeEverPushed: changeEverPushed
				}
			}());
		</script>
	</body>

</html>